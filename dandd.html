<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="portfolio, resume, curriculum vitae, Peter, Bellaby, Peter Bellaby">
  <meta name="description" content="A resume and portfolio of Peter Bellaby">
  <meta name="author" content="Peter Bellaby">

  <title>D&D</title>

  <link rel="stylesheet" type="text/css" href="style.css">

  <!-- React with JSX -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

</head>

<body>

  <div class="sidebar" id="sidebar">
    <div class="nav">
      <h1 class="nav-title">Main Page</h1>
      <nav>
        <ul>
          <li class="nav-item"><a href="index.html" class="nav-item-a">Top Page</a></li>
          <li class="nav-item"><a href="about.html" class="nav-item-a">About Me</a></li>
          <li class="nav-item"><a href="programming.html" class="nav-item-a">Programming</a></li>
          <li class="nav-item"><a href="dandd.html" class="nav-item-a">D&D</a></li>
          <li class="nav-item"><a href="materium_existentiae.html" class="nav-item-a">The Materium Existentiae</a>
          </li>
          <li class="nav-item"><a href="https://www.github.com/Tamillis" class="nav-item-a" target="_blank">Github</a>
          </li>
          <li class="nav-item"><a href="mailto:bellaby1993@gmail.com?subject=Enquiry for Peter Bellaby"
              class="nav-item-a">Contact</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <button class="nav-btn" onClick="toggleNav()">&#9776;</button>

  <p class="subtitle">WIP</p>

  <section class="section">
    <!-- Taken from the Joplin document, manually for now -->
    <!-- One day I'll automate that process, cause it should be relatively easy -->
    <h1 class="main-title">Dungeons & Dragons At My Table</h1>
    <h2 class="subtitle">Introduction</h2>
    <div class="quote">“Make your choices wisely, apprentice, for you will find they come to define you.”</div>
    <div class="quote-source">– Unknown</div>

    <table class="table">
      <tr>
        <th>Class</th>
        <th>Feature</th>
        <th>Prerequisites</th>
      </tr>
      <tr>
        <td>Barbarian</td>
        <td>Unarmored Defense (Barbarian)</td>
        <td>Strength 13</td>
      </tr>
      <tr>
        <td>Fighter</td>
        <td>Fighting Style</td>
        <td>Strength 13 or Dexterity 13</td>
      </tr>
      <tr>
        <td>Fighter</td>
        <td>Second Wind</td>
        <td>Strength 13 or Dexterity 13</td>
      </tr>
      <tr>
        <td>Monk</td>
        <td>Unarmored Defense (Monk)</td>
        <td>Dexterity 13 and Wisdom 13</td>
      </tr>
      <tr>
        <td>Paladin</td>
        <td>Divine Sense</td>
        <td>Strength 13 and Charisma 13, prof. in Religion</td>
      </tr>
      <tr>
        <td>Paladin</td>
        <td>Lay on Hands</td>
        <td>Strength 13 and Charisma 13, prof. in Religion</td>
      </tr>
      <tr>
        <td>Revised Ranger</td>
        <td>Favored Enemy</td>
        <td>Dexterity 13 and Wisdom 13</td>
      </tr>
      <tr>
        <td>Rogue</td>
        <td>Expertise I</td>
        <td>Dexterity 13</td>
      </tr>
      <tr>
        <td>Rogue</td>
        <td>Thieves Cant</td>
        <td>Dexterity 13</td>
      </tr>
      <tr>
        <td>Wizard</td>
        <td>Arcane Recovery</td>
        <td>Intelligence 13</td>
      </tr>
    </table>

    <hr class="rule">

    <div id="PBCalc"></div>

    <script type="text/babel">
      //TODO: make CSS and classNames

      const PointBuyCalculatorApp = () => {
        //calculator level state data, first
        const [data, setData] = React.useState({
          Strength: 10,
          Dexterity: 10,
          Constitution: 10,
          Intelligence: 10,
          Wisdom: 10,
          Charisma: 10,
        });

        //global constant, taken from D&D 5e
        const POINTMAX = 27;

        //calc current point total
        let currPointTotal = 0;
        //by summing over all the values and adding them up using an inline arrow function and the forEach array function being called 
        //from the values array generated by the Object.values() prototype function. I think I'm finally learning JavaScript
        Object.values(data).forEach(val => { currPointTotal += getPointsValue(val); });

        function getPointsValue(attributeValue) {
          //get the points value for given attribute value using this array taken from D&D5e
          const mappingArray = [0, 1, 2, 3, 4, 5, 7, 9];

          //first check given attributeValue is within bounds using error data
          if (attributeValue < 8) return null;
          else if (attributeValue > 15) return NaN;

          //assign points value via index, which is 8 less than the corresponding attribute
          return mappingArray[attributeValue - 8];
        }

        const updateAttribute = (attribute, valueChange) => {
          //check the data isn't making the attributes illegal values
          if (data[attribute] + valueChange > 15 || data[attribute] + valueChange < 8) return;
          //check change doesnt violate max point cost if so return out

          //create a copy of the data using the spread operator
          const newData = { ...data };
          //directly modify that copied data, as thats ok

          //using bracket notation to access the property key thats passed in
          newData[attribute] += Number(valueChange);

          //compare currPointTotal with new hypothetical total
          let newPointTotal = 0;
          //by summing over all the values and adding them up using an inline arrow function and the forEach array function being called 
          //from the values array generated by the Object.values() prototype function. I think I'm finally learning JavaScript
          Object.values(newData).forEach(value => { newPointTotal += getPointsValue(value); });
          //and return escape if over POINTMAX
          if (newPointTotal > POINTMAX) return;

          //and call the hook. et voila
          setData(newData);
        }

        function Statbloc(props) {
          return (
            <div className="statbloc-container">
              <p className="statbloc-items statbloc-label">{props.attribute}: {props.value}</p>
              <button className="statbloc-items btn statbloc-btn" type="number" onClick={() => props.onClick(props.attribute, 1)}>+</button>
              <button className="statbloc-items btn statbloc-btn" type="number" onClick={() => props.onClick(props.attribute, -1)}>-</button>
            </div>
          )
        }

        //create array of appropriate statbloc components
        let stats = [];
        let keys = Object.keys(data);
        for (let i = 0; i < keys.length; i++) {
          stats.push(<Statbloc key={i} attribute={keys[i]} value={data[keys[i]]} onClick={updateAttribute} />)
        }

        return (<div className="app-body">
          <h3 className="subtitle">Point Buy Calculator</h3>

          <p className="main-text subtitle-synopsis">
            <span className="inline-subtitle">[[This calculator is built using React!]]</span><br />
            Calculate the points cost of your attributes, following standard D&D5e rules, not going over 15 or below 8.
          </p>
          <div className="app-main">
            <div className="calculator-body">
              <p className="main-text inline-subtitle underline">{"Points: " + currPointTotal + " / " + POINTMAX}</p>
              {stats}
            </div>
            <table className="table app-table">
              <tbody>
                <tr>
                  <th>Attribute Value</th>
                  <th>Point Cost</th>
                </tr>
                <tr>
                  <td>15</td>
                  <td>9</td>
                </tr>
                <tr>
                  <td>14</td>
                  <td>7</td>
                </tr>
                <tr>
                  <td>13</td>
                  <td>5</td>
                </tr>
                <tr>
                  <td>12</td>
                  <td>4</td>
                </tr>
                <tr>
                  <td>11</td>
                  <td>3</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>2</td>
                </tr>
                <tr>
                  <td>9</td>
                  <td>1</td>
                </tr>
                <tr>
                  <td>8</td>
                  <td>0</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        )
      }

      ReactDOM.render(<PointBuyCalculatorApp />, document.getElementById("PBCalc"));

    </script>

  </section>

  <footer id="footer" class="main-footer">
    <label class="footer-text align-right" for="demo-div">This site demos: </label>
    <div id="demo-div">
      <img src="assets/icons8-code-file-50.png" width="32" height="32" style="border-radius:5px;" title="Static HTML">
      <svg version="1.1" id="Layer_2_1_" width="36" height="36" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 841.9 595.3"
        enable-background="new 0 0 841.9 595.3" xml:space="preserve">
        <g>
          <path fill="#61DAFB"
            d="M666.3,296.5c0-32.5-40.7-63.3-103.1-82.4c14.4-63.6,8-114.2-20.2-130.4c-6.5-3.8-14.1-5.6-22.4-5.6v22.3   c4.6,0,8.3,0.9,11.4,2.6c13.6,7.8,19.5,37.5,14.9,75.7c-1.1,9.4-2.9,19.3-5.1,29.4c-19.6-4.8-41-8.5-63.5-10.9   c-13.5-18.5-27.5-35.3-41.6-50c32.6-30.3,63.2-46.9,84-46.9l0-22.3c0,0,0,0,0,0c-27.5,0-63.5,19.6-99.9,53.6   c-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7,0,51.4,16.5,84,46.6c-14,14.7-28,31.4-41.3,49.9c-22.6,2.4-44,6.1-63.6,11   c-2.3-10-4-19.7-5.2-29c-4.7-38.2,1.1-67.9,14.6-75.8c3-1.8,6.9-2.6,11.5-2.6l0-22.3c0,0,0,0,0,0c-8.4,0-16,1.8-22.6,5.6   c-28.1,16.2-34.4,66.7-19.9,130.1c-62.2,19.2-102.7,49.9-102.7,82.3c0,32.5,40.7,63.3,103.1,82.4c-14.4,63.6-8,114.2,20.2,130.4   c6.5,3.8,14.1,5.6,22.5,5.6c27.5,0,63.5-19.6,99.9-53.6c36.4,33.8,72.4,53.2,99.9,53.2c8.4,0,16-1.8,22.6-5.6   c28.1-16.2,34.4-66.7,19.9-130.1C625.8,359.7,666.3,328.9,666.3,296.5z M536.1,229.8c-3.7,12.9-8.3,26.2-13.5,39.5   c-4.1-8-8.4-16-13.1-24c-4.6-8-9.5-15.8-14.4-23.4C509.3,224,523,226.6,536.1,229.8z M490.3,336.3c-7.8,13.5-15.8,26.3-24.1,38.2   c-14.9,1.3-30,2-45.2,2c-15.1,0-30.2-0.7-45-1.9c-8.3-11.9-16.4-24.6-24.2-38c-7.6-13.1-14.5-26.4-20.8-39.8   c6.2-13.4,13.2-26.8,20.7-39.9c7.8-13.5,15.8-26.3,24.1-38.2c14.9-1.3,30-2,45.2-2c15.1,0,30.2,0.7,45,1.9   c8.3,11.9,16.4,24.6,24.2,38c7.6,13.1,14.5,26.4,20.8,39.8C504.7,309.8,497.8,323.2,490.3,336.3z M522.6,323.3   c5.4,13.4,10,26.8,13.8,39.8c-13.1,3.2-26.9,5.9-41.2,8c4.9-7.7,9.8-15.6,14.4-23.7C514.2,339.4,518.5,331.3,522.6,323.3z    M421.2,430c-9.3-9.6-18.6-20.3-27.8-32c9,0.4,18.2,0.7,27.5,0.7c9.4,0,18.7-0.2,27.8-0.7C439.7,409.7,430.4,420.4,421.2,430z    M346.8,371.1c-14.2-2.1-27.9-4.7-41-7.9c3.7-12.9,8.3-26.2,13.5-39.5c4.1,8,8.4,16,13.1,24C337.1,355.7,341.9,363.5,346.8,371.1z    M420.7,163c9.3,9.6,18.6,20.3,27.8,32c-9-0.4-18.2-0.7-27.5-0.7c-9.4,0-18.7,0.2-27.8,0.7C402.2,183.3,411.5,172.6,420.7,163z    M346.7,221.9c-4.9,7.7-9.8,15.6-14.4,23.7c-4.6,8-8.9,16-13,24c-5.4-13.4-10-26.8-13.8-39.8C318.6,226.7,332.4,224,346.7,221.9z    M256.2,347.1c-35.4-15.1-58.3-34.9-58.3-50.6c0-15.7,22.9-35.6,58.3-50.6c8.6-3.7,18-7,27.7-10.1c5.7,19.6,13.2,40,22.5,60.9   c-9.2,20.8-16.6,41.1-22.2,60.6C274.3,354.2,264.9,350.8,256.2,347.1z M310,490c-13.6-7.8-19.5-37.5-14.9-75.7   c1.1-9.4,2.9-19.3,5.1-29.4c19.6,4.8,41,8.5,63.5,10.9c13.5,18.5,27.5,35.3,41.6,50c-32.6,30.3-63.2,46.9-84,46.9   C316.8,492.6,313,491.7,310,490z M547.2,413.8c4.7,38.2-1.1,67.9-14.6,75.8c-3,1.8-6.9,2.6-11.5,2.6c-20.7,0-51.4-16.5-84-46.6   c14-14.7,28-31.4,41.3-49.9c22.6-2.4,44-6.1,63.6-11C544.3,394.8,546.1,404.5,547.2,413.8z M585.7,347.1c-8.6,3.7-18,7-27.7,10.1   c-5.7-19.6-13.2-40-22.5-60.9c9.2-20.8,16.6-41.1,22.2-60.6c9.9,3.1,19.3,6.5,28.1,10.2c35.4,15.1,58.3,34.9,58.3,50.6   C644,312.2,621.1,332.1,585.7,347.1z" />
          <polygon fill="#61DAFB" points="320.8,78.4 320.8,78.4 320.8,78.4  " />
          <circle fill="#61DAFB" cx="420.9" cy="296.5" r="45.7" />
          <polygon fill="#61DAFB" points="520.5,78.1 520.5,78.1 520.5,78.1  " />
        </g>
        <title>React in use</title>
      </svg>
    </div>
    <p class="footer-text">This is my personal site, all material is of my own make, pulled from publicly available
      resources, or used with permission. Any enquiries or concerns are welcome via contact. </p>
  </footer>

  <script src="functionality.js"></script>
</body>


</html>